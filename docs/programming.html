<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Programming | LaBaratory Manual</title>
  <meta name="description" content="Resources and references for Kevin Labar’s emotion and cognition lab." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Programming | LaBaratory Manual" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Resources and references for Kevin Labar’s emotion and cognition lab." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Programming | LaBaratory Manual" />
  
  <meta name="twitter:description" content="Resources and references for Kevin Labar’s emotion and cognition lab." />
  

<meta name="author" content="Nathan Muncy" />


<meta name="date" content="2024-01-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fmri.html"/>
<link rel="next" href="databases.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">LaBaratory Wiki</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#planned-content-additions"><i class="fa fa-check"></i>Planned content additions</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#location"><i class="fa fa-check"></i><b>1.1</b> Location</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#duke-card"><i class="fa fa-check"></i><b>1.2</b> Duke Card</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#computer-access"><i class="fa fa-check"></i><b>1.3</b> Computer Access</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#human-research-training"><i class="fa fa-check"></i><b>1.4</b> Human Research Training</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="access-server.html"><a href="access-server.html"><i class="fa fa-check"></i><b>2</b> Accessing Servers</a>
<ul>
<li class="chapter" data-level="2.1" data-path="access-server.html"><a href="access-server.html#labar-lab-shared-drive-keoki"><i class="fa fa-check"></i><b>2.1</b> LaBar Lab Shared Drive (keoki)</a></li>
<li class="chapter" data-level="2.2" data-path="access-server.html"><a href="access-server.html#biac-servers"><i class="fa fa-check"></i><b>2.2</b> BIAC Servers</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="access-server.html"><a href="access-server.html#mac-osx-users"><i class="fa fa-check"></i><b>2.2.1</b> Mac OSx Users</a></li>
<li class="chapter" data-level="2.2.2" data-path="access-server.html"><a href="access-server.html#windows-users"><i class="fa fa-check"></i><b>2.2.2</b> Windows Users</a></li>
<li class="chapter" data-level="2.2.3" data-path="access-server.html"><a href="access-server.html#after-succesful-login"><i class="fa fa-check"></i><b>2.2.3</b> After Succesful Login</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="psychophys.html"><a href="psychophys.html"><i class="fa fa-check"></i><b>3</b> Psychophysics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="psychophys.html"><a href="psychophys.html#psychophys-ecg"><i class="fa fa-check"></i><b>3.1</b> Psychophysics - ECG</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="psychophys.html"><a href="psychophys.html#introduction"><i class="fa fa-check"></i><b>3.1.1</b> Introduction</a></li>
<li class="chapter" data-level="3.1.2" data-path="psychophys.html"><a href="psychophys.html#supplies"><i class="fa fa-check"></i><b>3.1.2</b> Supplies</a></li>
<li class="chapter" data-level="3.1.3" data-path="psychophys.html"><a href="psychophys.html#computer-preparation"><i class="fa fa-check"></i><b>3.1.3</b> Computer Preparation</a></li>
<li class="chapter" data-level="3.1.4" data-path="psychophys.html"><a href="psychophys.html#lead-preparation"><i class="fa fa-check"></i><b>3.1.4</b> Lead Preparation</a></li>
<li class="chapter" data-level="3.1.5" data-path="psychophys.html"><a href="psychophys.html#electrode-preparation-and-placement"><i class="fa fa-check"></i><b>3.1.5</b> Electrode Preparation and Placement</a></li>
<li class="chapter" data-level="3.1.6" data-path="psychophys.html"><a href="psychophys.html#lead-application-and-clean-up"><i class="fa fa-check"></i><b>3.1.6</b> Lead Application and Clean Up</a></li>
<li class="chapter" data-level="3.1.7" data-path="psychophys.html"><a href="psychophys.html#references"><i class="fa fa-check"></i><b>3.1.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="psychophys.html"><a href="psychophys.html#psychophys-eda"><i class="fa fa-check"></i><b>3.2</b> Psychophysics - EDA</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="psychophys.html"><a href="psychophys.html#introduction-1"><i class="fa fa-check"></i><b>3.2.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2.2" data-path="psychophys.html"><a href="psychophys.html#procedures"><i class="fa fa-check"></i><b>3.2.2</b> Procedures</a></li>
<li class="chapter" data-level="3.2.3" data-path="psychophys.html"><a href="psychophys.html#references-1"><i class="fa fa-check"></i><b>3.2.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="psychophys.html"><a href="psychophys.html#psychophys-egg"><i class="fa fa-check"></i><b>3.3</b> Psychophysics - EGG</a></li>
<li class="chapter" data-level="3.4" data-path="psychophys.html"><a href="psychophys.html#psychophys-emg"><i class="fa fa-check"></i><b>3.4</b> Psychophysics - EMG</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="psychophys.html"><a href="psychophys.html#introduction-2"><i class="fa fa-check"></i><b>3.4.1</b> Introduction</a></li>
<li class="chapter" data-level="3.4.2" data-path="psychophys.html"><a href="psychophys.html#supplies-1"><i class="fa fa-check"></i><b>3.4.2</b> Supplies</a></li>
<li class="chapter" data-level="3.4.3" data-path="psychophys.html"><a href="psychophys.html#computer-preparation-1"><i class="fa fa-check"></i><b>3.4.3</b> Computer Preparation</a></li>
<li class="chapter" data-level="3.4.4" data-path="psychophys.html"><a href="psychophys.html#face-preparation"><i class="fa fa-check"></i><b>3.4.4</b> Face Preparation</a></li>
<li class="chapter" data-level="3.4.5" data-path="psychophys.html"><a href="psychophys.html#electrode-preparation"><i class="fa fa-check"></i><b>3.4.5</b> Electrode Preparation</a></li>
<li class="chapter" data-level="3.4.6" data-path="psychophys.html"><a href="psychophys.html#electrode-placement---corrugator-muscle"><i class="fa fa-check"></i><b>3.4.6</b> Electrode Placement - corrugator muscle</a></li>
<li class="chapter" data-level="3.4.7" data-path="psychophys.html"><a href="psychophys.html#electrode-placement---zygomaticus-muscle"><i class="fa fa-check"></i><b>3.4.7</b> Electrode Placement - zygomaticus muscle</a></li>
<li class="chapter" data-level="3.4.8" data-path="psychophys.html"><a href="psychophys.html#cleaning"><i class="fa fa-check"></i><b>3.4.8</b> Cleaning</a></li>
<li class="chapter" data-level="3.4.9" data-path="psychophys.html"><a href="psychophys.html#references-2"><i class="fa fa-check"></i><b>3.4.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="psychophys.html"><a href="psychophys.html#psychophys-rsp"><i class="fa fa-check"></i><b>3.5</b> Psychophysics - RSP</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="psychophys.html"><a href="psychophys.html#introduction-3"><i class="fa fa-check"></i><b>3.5.1</b> Introduction</a></li>
<li class="chapter" data-level="3.5.2" data-path="psychophys.html"><a href="psychophys.html#supplies-2"><i class="fa fa-check"></i><b>3.5.2</b> Supplies</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="psychophys.html"><a href="psychophys.html#psychophys-stim"><i class="fa fa-check"></i><b>3.6</b> Psychophysics - STIM</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="psychophys.html"><a href="psychophys.html#supplies-3"><i class="fa fa-check"></i><b>3.6.1</b> Supplies</a></li>
<li class="chapter" data-level="3.6.2" data-path="psychophys.html"><a href="psychophys.html#computer-preparation-2"><i class="fa fa-check"></i><b>3.6.2</b> Computer Preparation</a></li>
<li class="chapter" data-level="3.6.3" data-path="psychophys.html"><a href="psychophys.html#electrode-preparation-and-placement-1"><i class="fa fa-check"></i><b>3.6.3</b> Electrode Preparation and Placement</a></li>
<li class="chapter" data-level="3.6.4" data-path="psychophys.html"><a href="psychophys.html#stim-calibration"><i class="fa fa-check"></i><b>3.6.4</b> Stim Calibration</a></li>
<li class="chapter" data-level="3.6.5" data-path="psychophys.html"><a href="psychophys.html#clean-up"><i class="fa fa-check"></i><b>3.6.5</b> Clean Up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="psychtoolbox.html"><a href="psychtoolbox.html"><i class="fa fa-check"></i><b>4</b> Psychtoolbox</a>
<ul>
<li class="chapter" data-level="4.1" data-path="psychtoolbox.html"><a href="psychtoolbox.html#introduction-4"><i class="fa fa-check"></i><b>4.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="psychtoolbox.html"><a href="psychtoolbox.html#basics"><i class="fa fa-check"></i><b>4.1.1</b> Basics</a></li>
<li class="chapter" data-level="4.1.2" data-path="psychtoolbox.html"><a href="psychtoolbox.html#learn-ex"><i class="fa fa-check"></i><b>4.1.2</b> Learn Through Examples</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="psychtoolbox.html"><a href="psychtoolbox.html#qa"><i class="fa fa-check"></i><b>4.2</b> Questions and Answers</a></li>
<li class="chapter" data-level="4.3" data-path="psychtoolbox.html"><a href="psychtoolbox.html#screen-function"><i class="fa fa-check"></i><b>4.3</b> Screen Function</a></li>
<li class="chapter" data-level="4.4" data-path="psychtoolbox.html"><a href="psychtoolbox.html#psychtoolboox-use-at-biac"><i class="fa fa-check"></i><b>4.4</b> Psychtoolboox use at BIAC</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="psychtoolbox.html"><a href="psychtoolbox.html#loading-ptb"><i class="fa fa-check"></i><b>4.4.1</b> Loading PTB</a></li>
<li class="chapter" data-level="4.4.2" data-path="psychtoolbox.html"><a href="psychtoolbox.html#triggering-experiment-start"><i class="fa fa-check"></i><b>4.4.2</b> Triggering Experiment Start</a></li>
<li class="chapter" data-level="4.4.3" data-path="psychtoolbox.html"><a href="psychtoolbox.html#recording-events-onset-and-duration"><i class="fa fa-check"></i><b>4.4.3</b> Recording Events Onset and Duration</a></li>
<li class="chapter" data-level="4.4.4" data-path="psychtoolbox.html"><a href="psychtoolbox.html#using-the-button-box"><i class="fa fa-check"></i><b>4.4.4</b> Using the Button Box</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fmri.html"><a href="fmri.html"><i class="fa fa-check"></i><b>5</b> Functional MRI</a>
<ul>
<li class="chapter" data-level="5.1" data-path="fmri.html"><a href="fmri.html#introduction-5"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="fmri.html"><a href="fmri.html#initiating-and-running-an-mri-study-at-duke"><i class="fa fa-check"></i><b>5.2</b> Initiating and Running an MRI Study at Duke</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="fmri.html"><a href="fmri.html#irb-protocol-approval"><i class="fa fa-check"></i><b>5.2.1</b> IRB Protocol Approval</a></li>
<li class="chapter" data-level="5.2.2" data-path="fmri.html"><a href="fmri.html#biac-safety-certification"><i class="fa fa-check"></i><b>5.2.2</b> BIAC Safety Certification</a></li>
<li class="chapter" data-level="5.2.3" data-path="fmri.html"><a href="fmri.html#biac-protocol-approval"><i class="fa fa-check"></i><b>5.2.3</b> BIAC Protocol Approval</a></li>
<li class="chapter" data-level="5.2.4" data-path="fmri.html"><a href="fmri.html#using-the-biac-calendar"><i class="fa fa-check"></i><b>5.2.4</b> Using the BIAC Calendar</a></li>
<li class="chapter" data-level="5.2.5" data-path="fmri.html"><a href="fmri.html#biac-study-preparation"><i class="fa fa-check"></i><b>5.2.5</b> BIAC Study Preparation</a></li>
<li class="chapter" data-level="5.2.6" data-path="fmri.html"><a href="fmri.html#study-running"><i class="fa fa-check"></i><b>5.2.6</b> Study Running</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="fmri.html"><a href="fmri.html#spm"><i class="fa fa-check"></i><b>5.3</b> SPM</a>
<ul>
<li class="chapter" data-level="" data-path="fmri.html"><a href="fmri.html#installing-and-using-spm-preprocessing-batch-script-templates"><i class="fa fa-check"></i>Installing and Using SPM Preprocessing Batch Script Templates</a></li>
<li class="chapter" data-level="5.3.1" data-path="fmri.html"><a href="fmri.html#basic-file-manipulation-terms-and-information"><i class="fa fa-check"></i><b>5.3.1</b> Basic File Manipulation Terms and Information</a></li>
<li class="chapter" data-level="5.3.2" data-path="fmri.html"><a href="fmri.html#installing-necessary-script-files"><i class="fa fa-check"></i><b>5.3.2</b> Installing Necessary Script Files</a></li>
<li class="chapter" data-level="5.3.3" data-path="fmri.html"><a href="fmri.html#checking-spm-module-installation"><i class="fa fa-check"></i><b>5.3.3</b> Checking SPM Module Installation</a></li>
<li class="chapter" data-level="5.3.4" data-path="fmri.html"><a href="fmri.html#fmri-preprocessing-steps"><i class="fa fa-check"></i><b>5.3.4</b> FMRI preprocessing steps</a></li>
<li class="chapter" data-level="5.3.5" data-path="fmri.html"><a href="fmri.html#reorganizing-image-data-and-copying-them-from-the-biac-servers"><i class="fa fa-check"></i><b>5.3.5</b> Reorganizing Image Data and Copying Them from the BIAC Servers</a></li>
<li class="chapter" data-level="5.3.6" data-path="fmri.html"><a href="fmri.html#image-parameters-and-image-format-necessary-for-preprocessing"><i class="fa fa-check"></i><b>5.3.6</b> Image Parameters and Image Format Necessary for Preprocessing</a></li>
<li class="chapter" data-level="5.3.7" data-path="fmri.html"><a href="fmri.html#preparing-the-batch-template-for-use"><i class="fa fa-check"></i><b>5.3.7</b> Preparing the Batch Template for Use</a></li>
<li class="chapter" data-level="5.3.8" data-path="fmri.html"><a href="fmri.html#running-a-single-subject-and-checking-results"><i class="fa fa-check"></i><b>5.3.8</b> Running a Single Subject and Checking Results</a></li>
<li class="chapter" data-level="5.3.9" data-path="fmri.html"><a href="fmri.html#running-the-batch-script-on-multiple-subjects"><i class="fa fa-check"></i><b>5.3.9</b> Running the Batch Script on Multiple Subjects</a></li>
<li class="chapter" data-level="5.3.10" data-path="fmri.html"><a href="fmri.html#quality-assurance-output-descriptions"><i class="fa fa-check"></i><b>5.3.10</b> Quality Assurance Output Descriptions</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="fmri.html"><a href="fmri.html#qa---fmriprep"><i class="fa fa-check"></i><b>5.4</b> QA - FMRIPrep</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="fmri.html"><a href="fmri.html#general-information"><i class="fa fa-check"></i><b>5.4.1</b> General Information</a></li>
<li class="chapter" data-level="5.4.2" data-path="fmri.html"><a href="fmri.html#checking-anatomical-images"><i class="fa fa-check"></i><b>5.4.2</b> Checking Anatomical Images</a></li>
<li class="chapter" data-level="5.4.3" data-path="fmri.html"><a href="fmri.html#checking-functional-images"><i class="fa fa-check"></i><b>5.4.3</b> Checking Functional Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>6</b> Programming</a>
<ul>
<li class="chapter" data-level="6.1" data-path="programming.html"><a href="programming.html#introduction-6"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="programming.html"><a href="programming.html#best-practices"><i class="fa fa-check"></i><b>6.2</b> Best Practices</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="programming.html"><a href="programming.html#python"><i class="fa fa-check"></i><b>6.2.1</b> Python</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="programming.html"><a href="programming.html#cli"><i class="fa fa-check"></i><b>6.3</b> Command Line Interface</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="programming.html"><a href="programming.html#python-1"><i class="fa fa-check"></i><b>6.3.1</b> Python</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="programming.html"><a href="programming.html#documentation"><i class="fa fa-check"></i><b>6.4</b> Documentation</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="programming.html"><a href="programming.html#python-2"><i class="fa fa-check"></i><b>6.4.1</b> Python</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>7</b> Databases</a>
<ul>
<li class="chapter" data-level="7.1" data-path="databases.html"><a href="databases.html#create-an-account"><i class="fa fa-check"></i><b>7.1</b> Create an Account</a></li>
<li class="chapter" data-level="7.2" data-path="databases.html"><a href="databases.html#login"><i class="fa fa-check"></i><b>7.2</b> Login</a></li>
<li class="chapter" data-level="7.3" data-path="databases.html"><a href="databases.html#create_database"><i class="fa fa-check"></i><b>7.3</b> Create a Database</a></li>
<li class="chapter" data-level="7.4" data-path="databases.html"><a href="databases.html#create_table"><i class="fa fa-check"></i><b>7.4</b> Create a Table</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="databases.html"><a href="databases.html#reference_tables"><i class="fa fa-check"></i><b>7.4.1</b> Reference Tables</a></li>
<li class="chapter" data-level="7.4.2" data-path="databases.html"><a href="databases.html#data_tables"><i class="fa fa-check"></i><b>7.4.2</b> Data Tables</a></li>
<li class="chapter" data-level="7.4.3" data-path="databases.html"><a href="databases.html#definition_tables"><i class="fa fa-check"></i><b>7.4.3</b> Definition Tables</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="databases.html"><a href="databases.html#insert_data"><i class="fa fa-check"></i><b>7.5</b> Insert Data</a></li>
<li class="chapter" data-level="7.6" data-path="databases.html"><a href="databases.html#select-data"><i class="fa fa-check"></i><b>7.6</b> Select Data</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="databases.html"><a href="databases.html#basic-usage"><i class="fa fa-check"></i><b>7.6.1</b> Basic Usage</a></li>
<li class="chapter" data-level="7.6.2" data-path="databases.html"><a href="databases.html#join-tables"><i class="fa fa-check"></i><b>7.6.2</b> Join Tables</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">LaBaratory Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Programming<a href="programming.html#programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Written on 2022 Sep 04 by Nathan Muncy</p>
<p>This chapter is under construction.</p>
<div id="introduction-6" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Introduction<a href="programming.html#introduction-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The goal of this chapter is to provide general guidance on a number of topics with an aim to standardize how code is written in the LaBar Lab. Standardization will (1) speed-up the development and trouble-shooting process and (2) support maintenance and use efforts when students and researchers have left the lab.</p>
</div>
<div id="best-practices" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Best Practices<a href="programming.html#best-practices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A programming adage says that “Code is written once but read many times”. Best practices guide decisions that programmers make when writing their code, ranging from how to name variables to the structure of entire projects, so that their (brilliant) work is accessible to, and maintainable by, others. Many articles, blogs, and books have been written about best practices, so the aim here is not to exhaustively describe all recommendations but to provide some basic principles.</p>
<p>In addition to more language-specific recommendations below, a few guidelines are applicable in any language:</p>
<ol style="list-style-type: decimal">
<li><p>Avoid deep nests of logic. Keeping nested logic as simple as is reasonable will help the next person follow your code (including your future self). Such nests show up in for-loops, conditionals, and method calls. If you are finding yourself spelunking in nests (I try to keep it less than 3 levels) save your future self the headache and restructure your code. Relatedly, have each line of code do only one or two things. A complicated “one-liner” is only cool for 15 seconds, and after that will convolute the code for everyone (including you).</p></li>
<li><p>Have meaningful names. Names for variables, functions, methods, modules etc. should be simple and descriptive. We do not want to remember what <code>i</code> means in this current loop, nor having to re-read documentation about what <code>function_a</code> and <code>pls_work</code> do. A good name will be unique in the project’s <a href="https://en.wikipedia.org/wiki/Namespace">namespace</a>, human readable, and informative.</p></li>
<li><p>Minimize <a href="https://en.wikipedia.org/wiki/Technical_debt">technical debt</a>. Time spent up-front is time saved on the life of the project. Take the time to structure your code well and write documentation.</p></li>
</ol>
<div id="python" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Python<a href="programming.html#python" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Python has an established history of best practices since <a href="https://peps.python.org/pep-0008/">PEP8</a>, and modern IDEs like <a href="https://code.visualstudio.com/download">VS Code</a> are configurable to help conform to these (and more modern) recommendations. I recommend using a <a href="https://realpython.com/python-code-quality/">linter</a> (and it is very easy to <a href="https://code.visualstudio.com/docs/python/linting">install and use</a> in VS Code): linters serve to check for syntax and/or style issues by referencing a predetermined guide. The guide <a href="https://flake8.pycqa.org/en/latest/">Flake8</a> is a preferred style that detects both syntax and style issues. Additionally, auto-formatters such as <a href="https://www.geeksforgeeks.org/python-code-formatting-using-black/">Black</a> can save you the effort of formatting your code according to Flake8 or other recommendations (and can also be <a href="https://code.visualstudio.com/docs/python/editing">installed</a> in VS Code).</p>
<p>As <a href="https://peps.python.org/pep-0008/">PEP8</a> is well established and conforming somewhat automated, here I reiterate and make a few suggestions:</p>
<ul>
<li>Variable, function, method, module, and package names should be named in <code>snake_case</code></li>
<li>Class names should use <code>PascalCase</code></li>
<li>Every python file (except maybe <code>__init__.py</code>) should have a <code>__doc__</code> <a href="https://www.programiz.com/python-programming/docstrings">attribute</a>, preferably at the top of the file</li>
<li>Functions, classes, and methods should also contain a <a href="https://www.programiz.com/python-programming/docstrings">docstring</a></li>
<li>Docstrings should be formatted to the <a href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpy style</a></li>
<li>Format comments in sentence case, and use comments to explain the functionality (not syntax)</li>
<li>Decide whether procedural, functional, or object-oriented programming best suite your task (Section <a href="#prog-style"><strong>??</strong></a>)</li>
<li>Avoid editing code for each use – supply a command-line interface (Section <a href="programming.html#cli">6.3</a>) if argument parameters are needed</li>
<li>Encapsulate work within functions, and even simple scripts should put work within a <code>main()</code> function.</li>
</ul>
<!-- ### Shell -->
<!-- ### R -->
<!-- ### Matlab -->
</div>
</div>
<div id="cli" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Command Line Interface<a href="programming.html#cli" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A resource or package is often developed that is a bit flexible, allowing for the functionality to be adjusted by user input. For instance, a general set of steps for functional MRI preprocessing can be written in a script without specifying certain values like the participant and session IDs, task names, or the input and output directories. Such a script would be very useful and portable. It is <em>not</em> recommended, however, to structure your code such that the user must open and edit the code for each use (e.g. new subject, session, or directory path). Rather, build a method of capturing user inputs and supply documentation on what inputs are allowed and their functionality. This section details how to setup such a command line interface.</p>
<div id="python-1" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Python<a href="programming.html#python-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Python makes requiring, capturing, and specifying command line inputs very easy with the standard <a href="https://docs.python.org/3/library/argparse.html">argparse</a> package. Here we will use this package to set up a small script.</p>
<p><strong>The <code>__doc__</code> and import</strong></p>
<p>In a python script called <code>example.py</code>, I first set the <code>__doc__</code> <a href="https://www.programiz.com/python-programming/docstrings">attribute</a> detailing what work the script does and how to use the script from the command line, using the <a href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpy style</a> of docstring formats (Figure <a href="programming.html#fig:img-6-cli-python-1">6.1</a>, lines 1-10). In practice I actually tend to write the <code>__doc__</code> attribute last, but this is just an example.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-1"></span>
<img src="imgs/06-cli_python_doc_import.png" alt="`__doc__` attribute and imports." width="70%" />
<p class="caption">
Figure 6.1: <code>__doc__</code> attribute and imports.
</p>
</div>
<p>An <code>Examples</code> section is an important aspect of the docstring, and here I supply two examples illustrating the different use cases (lines 7-8). Following the the <code>__doc__</code> attribute, a few packages are imported: <code>sys</code> will help with counting the number of arguments, <code>textwrap</code> will help with formatting option defaults, and from the <code>argparse</code> package the two most critical classes are <code>ArgumentParser</code> and <code>RawTextHelpFormatter</code> that are used in capturing and communicating the arguments (lines 11-13).</p>
<p><strong>Specifying arguments</strong></p>
<p>Next, we will define a function called <code>get_arguments</code> to receive arguments (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>). The first step is to initialize an object called <code>parser</code> that will be used to specify arguments (lines 18-20). Here we specify the <code>description</code> and <code>formatter_class</code> attributes, by setting the <code>description</code> attribute to <code>__doc__</code>, we will be able to include our <code>__doc__</code> attribute (and the supplied examples) in the <code>help</code> section.</p>
<p>There are many argument configurations possible when using <code>ArgumentParser</code>, and as the <a href="https://docs.python.org/3/library/argparse.html">documentation</a> is recommended, here we will detail capturing a few strings. Lists, boolean, and other object types are also possible to capture. First in our example we build an optional argument (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 22-33); optional arguments are useful if the developer can anticipate a common argument from the user but still wants to allow the user to specify something else. In our instance, perhaps most people will think “mango” is their favorite fruit (set as the default on line 26), and in the real world perhaps you can anticipate data consistently stored in a specific location. In unpacking lines 22-33, we can see that we are adding an argument available to the user which is accessed via <code>--fruit</code> (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, line 24), the parameter supplied should be a string (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, line 25), the default value is “mango” (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, line 26), and the help provides instruction as well as specifying what is the default value (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 27-32). In this way, if the user does not elect to use the <code>--fruit</code> option, then the code will use the default value of “mango”.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-2"></span>
<img src="imgs/06-cli_python_get_args.png" alt="Function to require and capture arguments." width="70%" />
<p class="caption">
Figure 6.2: Function to require and capture arguments.
</p>
</div>
<p>Next, we specify a required argument. While the code will not require an optional argument to run, and will use the default value if one is specified, python will stop if it detects that (a) a required argument exists, and (b) the user did not specify it. To make an argument required, one merely needs to specify a <code>required</code> option (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, line 41), but a few extra steps will help organize the <code>help</code> of your code. On line 36 I start a new argument group called “Required Arguments”, the help of these arguments will be printed separately from the optional arguments, and with this ordering (optional first, and then required arguments), the required arguments will appear closest to the command prompt. Next, I build a required argument (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 37-48) in this new “Required Arguments” group, specifying the option <code>required=True</code>. You’ll notice that I used both short and long options (<code>-n</code> and <code>--name</code>, respectively; Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 38-39), python developers tend to use long options as they are more informative, and I like to include a short option for required arguments to (a) visually distinguish between optional and required arguments in examples and (b) save on user typing time as these options will always be used. Finally a help and example is supplied (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 42-47). The various options and their parameters are returned by the <code>get_arguments</code> function on line 55.</p>
<p>Finally, a common practice is to for the user to execute a script or package without any arguments specified in order to print a <code>help</code>. To accomplish this, we trigger the <code>print_help</code> function of the <code>parser</code> object if no arguments are used and then terminate the script (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, lines 51-53).</p>
<p><strong>The work</strong></p>
<p>Now that optional and required arguments have been specified, we are ready to put those arguments to use! Figure <a href="programming.html#fig:img-6-cli-python-3">6.3</a> supplies the <code>main</code> function where the arguments are assigned and then used. On line 61 I first access the object returned by the <code>get_arguments</code> function and parse the arguments, parsing assigns each argument to its own attribute that is accessible via the supplied option. I can then set the values supplied by the user to new variables (Figure <a href="programming.html#fig:img-6-cli-python-3">6.3</a>, lines 62-63). The <code>user_name</code> and <code>user_fruit</code> variables, which contain default and user-specified parameters, are now able to be used in the script. Line 66 simply uses the variables to print a sentence out to the console.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-3"></span>
<img src="imgs/06-cli_python_main.png" alt="Use arguments to print." width="70%" />
<p class="caption">
Figure 6.3: Use arguments to print.
</p>
</div>
<p>By encapsulating the work in <code>main</code> and including the <a href="https://www.geeksforgeeks.org/dunder-magic-methods-python/">dunder</a> <code>__name__</code> conditional (lines 69-70, also see <a href="https://www.geeksforgeeks.org/what-does-the-if-__name__-__main__-do/">this</a>) we can set our script up to be executable from the command line. Let’s start testing with this, and here is the code for your convenience:</p>
<pre><code>&quot;&quot;&quot;Print user&#39;s name and fruit.

Capture input from the user and print out responses.

Examples
--------
python example.py -n Nate
python example.py -n Nate --fruit orange

&quot;&quot;&quot;
import sys
import textwrap
from argparse import ArgumentParser, RawTextHelpFormatter

def get_arguments():
    &quot;&quot;&quot;Capture and parse arguments.&quot;&quot;&quot;
    # Initialize argument parser.
    parser = ArgumentParser(
        description=__doc__, formatter_class=RawTextHelpFormatter
    )

    # Capture optional arguments.
    parser.add_argument(
        &quot;--fruit&quot;,
        type=str,
        default=&quot;mango&quot;,
        help=textwrap.dedent(
            &quot;&quot;&quot;\
            Specify a fruit.
            (default : %(default)s)
            &quot;&quot;&quot;
        ),
    )

    # Capture required arguments.
    required_args = parser.add_argument_group(&quot;Required Arguments&quot;)
    required_args.add_argument(
        &quot;-n&quot;,
        &quot;--name&quot;,
        type=str,
        required=True,
        help=textwrap.dedent(
            &quot;&quot;&quot;\
            Specify user&#39;s first name.
            e.g. &quot;-n Nate&quot; or &quot;--name Nathan&quot;
            &quot;&quot;&quot;
        ),
    )

    # Trigger help and exit if no options are used.
    if len(sys.argv) &lt;= 1:
        parser.print_help(sys.stderr)
        sys.exit(0)

    return parser


def main():
    &quot;&quot;&quot;Print user&#39;s favorite fruit.&quot;&quot;&quot;
    # Get user-specified arguments.
    user_arguments = get_arguments().parse_args()
    user_name = user_arguments.name
    user_fruit = user_arguments.fruit

    # Conduct work.
    print(f&quot;\n\tThe favorite fruit of {user_name} is {user_fruit}.\n&quot;)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<p><strong>Running the script</strong></p>
<p>If we recall lines 51-53 (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>), our script should print out a <code>help</code> if we execute it without any arguments. When we do so, observe how the <code>help</code> is built from both our <code>__doc__</code> attribute (Figure <a href="programming.html#fig:img-6-cli-python-1">6.1</a>, lines 1-10) as well as the help options specified in the <code>get_arguments</code> function. Additionally, as we created a separate “Required Arguments” group, these options are separated from the optional arguments (Figure <a href="programming.html#fig:img-6-cli-python-2">6.2</a>, line 36).</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-4"></span>
<img src="imgs/06-cli_python_run1.png" alt="Executing script without arguments to print `help`." width="70%" />
<p class="caption">
Figure 6.4: Executing script without arguments to print <code>help</code>.
</p>
</div>
<p>Next, the <code>--name</code> should be required, so what happens if we try to run the code with only the optional argument specified? Notice that a condensed <code>help</code> is printed to the console, detailing the <code>usage</code> and giving the error of missing required arguments.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-5"></span>
<img src="imgs/06-cli_python_run2.png" alt="Executing script without required arguments." width="70%" />
<p class="caption">
Figure 6.5: Executing script without required arguments.
</p>
</div>
<p>Finally, we can test both the optional and required arguments.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-cli-python-6"></span>
<img src="imgs/06-cli_python_run3.png" alt="Executing script with optional and required arguments." width="70%" />
<p class="caption">
Figure 6.6: Executing script with optional and required arguments.
</p>
</div>
<!-- ### Shell -->
<!-- ### R -->
</div>
</div>
<div id="documentation" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Documentation<a href="programming.html#documentation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Generally speaking, documentation is used for structuring and communicating your code or program. As documentation is used at different levels of programming and for different purposes so do its methodologies. At the planning stage, documentation can be used to sketch out the scaffolding of your program, planning what functionality will be written in which file and also providing a general organization to the project. At the development and maintenance stage, documentation both communicates the functionality of blocks of code and provides a framework to guide code insertions and refactoring. At the implementation or execution level, documentation provides information the user needs to effectively use the code and resolve any errors.</p>
<p>Documentation also serves as a “knowledge capture”, an important aspect when personnel turnover every few years. By documenting code well, a future user will know (a) what it does, (b) how to use it, (c) how to resolve errors, and (d) how to maintain it. As documentation serves many functions, it is found in many locations. Documentation about the structure and functionality of the code is often found within the code itself in the form of comments, and documentation about how to use the code is typically found within a help function or file. Finally, documentation about the project as a whole can take the form of a README, book, or webpage.</p>
<p>As documentation can serve many functions and be located in different forms and media, here we provide some guidelines with an aim of standardizing practices. Standard practices for documentation ensures that both users and developers can find, read, and understand the type of documentation needed for their task.</p>
<div id="python-2" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Python<a href="programming.html#python-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A range of practices and tools are available to help with documentation in python, from guidelines to software that can build html pages from properly-formatted documentation. When leveraged these practices and tools can make code quite accessible.</p>
<p><strong>Comments</strong></p>
<p>The role of comments is to describe what a certain block of code does. Write the comment for an audience that can read code, that is, explain what is happening and why while avoiding an explanation of the syntax. Comments should be used like salt – too little or too much is problematic while the right amount makes your mother proud. Pairing with proper naming conventions should allow the next reader to fully understand what is happening in the current section of code.</p>
<p>Comments should be written and sentence case and preceded by a single “#” and space. Line length guidelines apply to comments, so longer comments should take the form of a left-justified block. Figure <a href="programming.html#fig:img-6-doc-python-1-bad">6.7</a> provides a few examples of less-than-helpful comments.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-doc-python-1-bad"></span>
<img src="imgs/06-doc_python_1_bad.png" alt="Examples of bad comments." width="70%" />
<p class="caption">
Figure 6.7: Examples of bad comments.
</p>
</div>
<p>While any comments (as long as they are not wrong) are better than the absence of comments, a few grievances can be expressed about this commenting style. First, each comment only describes the syntax, making the comment redundant for anyone that can read the code (and assume your reader can read the code when writing comments!) Second, too many comments are supplied – lines 77, 79, and 81 do very similar things, so their corresponding comments say largely the same thing. All this clutters the code. A better example is shown in Figure <a href="programming.html#fig:img-6-doc-python-1-good">6.8</a>, where a comment is supplied for each section of work.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:img-6-doc-python-1-good"></span>
<img src="imgs/06-doc_python_1_good.png" alt="Examples of good comments." width="70%" />
<p class="caption">
Figure 6.8: Examples of good comments.
</p>
</div>
<p>While the examples here are rather simple, and so the comments still somewhat describe the code, as the functionality becomes more complex it will be important to remember to describe the point of a section of code, not the syntax itself. And if the syntax is very dense and confusing, a comment is definitely warranted to guide the programmer but restructuring is also likely warranted.</p>
<!-- ### Shell -->
<!-- ### R -->
<!-- ## Procedural, Functional, and Object-oriented Programming {#prog-style} -->
<!-- ### Python -->
<!-- ### Shell -->
<!-- ### R -->
<!-- ## Package Construction -->
<!-- ### Python -->
<!-- ### R -->
<!-- ## Unit Testing -->
<!-- ### Python -->

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fmri.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="databases.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/06-programming.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["labarlab.github.io.pdf", "labarlab.github.io.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
